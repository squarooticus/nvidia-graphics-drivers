From a4f1c3137143a779ee7340e30001ab1a6e304d46 Mon Sep 17 00:00:00 2001
From: Andreas Beckmann <anbe@debian.org>
Date: Tue, 27 Apr 2021 16:23:06 +0200
Subject: [PATCH] some power management features were not yet in Linux 2.6.32

---
 conftest.sh | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/conftest.sh b/conftest.sh
index c854510..98af501 100755
--- a/conftest.sh
+++ b/conftest.sh
@@ -3457,12 +3457,14 @@ compile_test() {
             # d30d819dc8310 in v3.19 (2014-11-27).
             # Rather than attempt to select the appropriate CONFIG option,
             # simply check if this member is present.
+            # dev->power.runtime_auto was introduced in 53823639173cc (v2.6.34).
             #
             CODE="
             #include <linux/pm.h>
             void pm_runtime_conftest(void) {
                 struct dev_pm_info dpmi;
                 atomic_set(&dpmi.usage_count, 1);
+                dpmi.runtime_auto;
             }"
 
             compile_check_conftest "$CODE" "NV_PM_RUNTIME_AVAILABLE" "" "generic"
-- 
2.20.1

